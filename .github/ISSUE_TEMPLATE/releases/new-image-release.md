---
name: "Add new image"
about: "Checklist for adding a new image to this repo"
title: "Add image for ___"
---

## Nightly Branch Tasks

1. - [ ] Update Dockerfiles and manifests
    1. - [ ] Create Dockerfiles under
        `/src/$product/$major-minor-version/$os/$arch/`. These Dockerfiles can contain placeholder
        content, as they will be re-generated by templates later.
    1. - [ ] If necessary, create new templates for [Dockerfiles](https://github.com/dotnet/dotnet-docker/tree/nightly/eng/dockerfile-templates)
        and [Readmes](https://github.com/dotnet/dotnet-docker/tree/nightly/eng/readme-templates)
            - See [CONTRIBUTING.md](https://github.com/dotnet/dotnet-docker/tree/nightly/CONTRIBUTING.md#editing-dockerfiles)
        for instructions on editing templates.
    1. - [ ] Update the [MAR tags metadata templates](https://github.com/dotnet/dotnet-docker/tree/nightly/eng/mcr-tags-metadata-templates)
        to include the new images
    1. - [ ] Update [manifest.json](https://github.com/dotnet/dotnet-docker/blob/nightly/manifest.json)
        to reference the new set of Dockerfiles and templates with the appropriate tags.
            - See the [supported tags policy](https://github.com/dotnet/dotnet-docker/blob/nightly/documentation/supported-tags.md)
          to see which tagging patterns to follow.
    1. - [ ] Run the commands to generate the Dockerfiles and READMEs based on templates:
        1. - [ ] `pwsh .\eng\readme-templates\Get-GeneratedDockerfiles.ps1`
        1. - [ ] `pwsh .\eng\readme-templates\Get-GeneratedReadmes.ps1`
        1. - [ ] Inspect generated changes for correctness
1. - [ ] Update tests
    1. - [ ] Add new image to [`TestData.cs`](https://github.com/dotnet/dotnet-docker/blob/nightly/tests/Microsoft.DotNet.Docker.Tests/TestData.cs)
    1. - [ ] Add unit tests and scenario tests. Follow existing patterns for other images.
1. - [ ] Consider authoring sample Dockerfiles and adding them to [samples](https://github.com/dotnet/dotnet-docker/tree/main/samples)
    1. - [ ] If not adding sample Dockerfiles, provide justification:
1. - [ ] Run `build-and-test.ps1` to build and test your images
        - See [CONTRIBUTING.md](https://github.com/dotnet/dotnet-docker/tree/nightly/CONTRIBUTING.md#editing-dockerfiles) for more detailed instructions
1. - [ ] Commit changes
1. - [ ] Create PR
1. - [ ] Consider drafting an announcement to be posted on this repo's [discussions page](https://github.com/dotnet/dotnet-docker/discussions)
    when images are published
1. - [ ] Get PR signoff
1. - [ ] Merge PR to nightly branch
1. - [ ] Wait for automatically queued CI build to finish on [dotnet-docker-nightly pipeline](https://dev.azure.com/dnceng/internal/_build?definitionId=359) (internal MSFT link)
1. - [ ] Confirm READMEs have been updated on [MAR](https://mcr.microsoft.com/en-us/catalog?search=dotnet) and [Docker Hub](https://hub.docker.com/r/microsoft/dotnet)

## Main Branch Tasks

1. - [ ] Merge the new distro changes to the main branch as part of the
     [release process](https://github.com/dotnet/release/blob/main/.github/ISSUE_TEMPLATE/dotnet-docker-servicing-release.md)
     for the next .NET release
1. - [ ] Create announcement
      - [ ] If the new distro is added for pre-release versions only, include the announcement in the new preview release announcement.
      - [ ] If the new distro applies to in-support .NET versions, post a separate announcement. Example: [Alpine 3.20](https://github.com/dotnet/dotnet-docker/discussions/5556)
