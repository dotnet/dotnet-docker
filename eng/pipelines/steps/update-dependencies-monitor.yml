parameters:
  majorMinorVersion: null
  channelQuality: null
  stableBranding: false

steps:
- script: $(engPath)/get-drop-versions-monitor.sh ${{ parameters.majorMinorVersion }}/${{ parameters.channelQuality }}
  displayName: Get Versions
- script: docker build -t update-dependencies -f $(engPath)/update-dependencies/Dockerfile --pull .
  displayName: Build Update Dependencies Tool
- script: >
    docker run --rm -v /var/run/docker.sock:/var/run/docker.sock update-dependencies
    ${{ parameters.majorMinorVersion }}
    --user $(dotnetDockerBot.userName)
    --email $(dotnetDockerBot.email)
    --password $(BotAccount-dotnet-docker-bot-PAT)
    --product-version monitor=$(monitorVer)
    --channel-name ${{ parameters.majorMinorVersion }}/${{ parameters.channelQuality }}
    --stable-branding ${{ parameters.stableBranding }}
    --version-source-name dotnet/dotnet-monitor/${{ parameters.majorMinorVersion }}
  displayName: Run Update Dependencies
