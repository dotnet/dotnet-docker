parameters:
  useInternalBuild: false

  # Comma-delimited list of SDK versions to target (overrides the use of channel var to determine latest version)
  sdkVersions: ""

steps:
- powershell: |
    if ("${{ parameters.sdkVersions }}" -ne "") {
      $args = @{
        SdkVersions = "${{ parameters.sdkVersions }}" -split ","
      }
    }
    else {
      $args = @{
        Channel = "$(channel)"
      }
    }

    if ("${{ parameters.useInternalBuild }}" -eq "true") {
      $args["UseInternalBuild"] = $true
      $args["BlobStorageSasQueryString"] = "$(dotnetstage-account-sas-read-token)"
      $args["AzdoVersionsRepoInfoAccessToken"] = "$(dn-bot-devdiv-dnceng-rw-code-pat)"
    }

    $(engPath)/Get-DropVersions.ps1 @args
  displayName: Get Versions
- template: update-dependencies.yml
  parameters:
    versionInfosArray: "$(versionInfos)"
    useInternalBuild: ${{ parameters.useInternalBuild }}
