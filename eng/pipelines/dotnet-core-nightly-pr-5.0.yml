trigger: none
pr:
  branches:
    include:
    - nightly
    - feature/*
  paths:
    include:
    - manifest.json
    - eng/*
    - src/aspnet/5.0/*
    - src/runtime/5.0/*
    - src/runtime-deps/5.0/*
    - src/sdk/5.0/*
    - tests/*

resources:
  repositories:
  - repository: VersionsRepo
    type: github
    endpoint: dotnet
    name: dotnet/versions

variables:
- template: variables/core.yml
- name: imageBuilder.pathArgs
  value: --path 'src/*/5.0/*'

stages:
- template: ../common/templates/stages/build-test-publish-repo.yml
  parameters:
    buildMatrixType: platformVersionedOs
    buildMatrixCustomBuildLegGroupArgs: --custom-build-leg-group pr-build --custom-build-leg-group test-dependencies
